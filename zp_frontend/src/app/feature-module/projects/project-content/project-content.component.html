 <!-- Page Content -->
    <div class="content container-fluid">
                
        <!-- Page Header -->
        <div class="page-header">
            <div class="row align-items-center">
                <div class="col">
                    <h3 class="page-title">Projects</h3>
                    <ul class="breadcrumb">
                        <li class="breadcrumb-item"><a [routerLink]="'/dashboard/admin'">Dashboard</a></li>
                        <li class="breadcrumb-item active">Projects</li>
                    </ul>
                </div>
                <div class="col-auto float-end ms-auto">
                    <a class="btn add-btn" *ngIf="connectedUser.permissions.includes('add_project')" data-bs-toggle="modal" data-bs-target="#create_project"><i class="fa-solid fa-plus"></i> Create Project</a>
                    <div class="view-icons">
                        <a [routerLink]="'/projects/project-page'" class="grid-view btn btn-link active"><i class="fa fa-th"></i></a>
                        <a [routerLink]="'/projects/project-list'" class="list-view btn btn-link"><i class="fa-solid fa-bars"></i></a>
                    </div>
                </div>
            </div>
        </div>
        <!-- /Page Header -->
        
        <!-- Search Filter -->
        <div class="row filter-row">
            <div class="col-sm-6 col-md-9">  
                <div class="input-block mb-3 form-focus">
                    <mat-form-field class="example-full-width">
                        <mat-label>Project Name</mat-label>
                        <input (keyup)="searchData()" [(ngModel)]="searchProject" class="form-control form-control-sm" type="text" matInput>
                    </mat-form-field>
                </div>
            </div>
            
        </div>
        <!-- Search Filter -->
        
        <div class="row">
            <div class="col-lg-4 col-sm-6 col-md-4 col-xl-3 d-flex" *ngFor="let project of projects;let i = index">
                <div class="card w-100">
                    <div class="card-body">
                        <div class="dropdown dropdown-action profile-action" *ngIf="connectedUser.permissions.includes('change_project') || connectedUser.permissions.includes('delete_project')">
                            <a href="javascript:void(0);" class="action-icon dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false"><i class="material-icons">more_vert</i></a>
                            <div class="dropdown-menu dropdown-menu-right">
                                <a class="dropdown-item" *ngIf="connectedUser.permissions.includes('change_project')" [routerLink]="'/projects/project-view/' + project.id"><i class="fa-solid fa-pencil m-r-5"></i> Edit</a>
                                <a class="dropdown-item" *ngIf="connectedUser.permissions.includes('delete_project')"  data-bs-toggle="modal" data-bs-target="#delete_project" (click)="this.selectedProject=project"><i class="fa-regular fa-trash-can m-r-5"></i> Delete</a>
                            </div>
                        </div>
                        <h4 class="project-title"><a [routerLink]="'/projects/project-view/'+ project.id">{{project?.name}}</a></h4>
                        
                        <p class="text-muted">{{project?.description.slice(0,10)}} ...
                        </p>
                        <div class="pro-deadline m-b-15">
                            <div class="sub-title">
                                Deadline:
                            </div>
                            <div class="text-muted">
                                {{ project?.end_date | date: 'dd MMM, yyyy' }}
                            </div>
                        </div>
                        <div class="project-members m-b-15">
                            <div>Project Manager :</div>
                            <ul class="team-members">
                                <li>
                                    <a href="javascript:void(0);" data-bs-toggle="tooltip" title="{{project.project_manager?.firstname}} {{project.project_manager?.lastname}}"><img src="{{project.project_manager?.profile_photo || image}}" alt="User Image"></a>
                                </li>
                            </ul>
                        </div>
                        <div class="project-members m-b-15">
                            <div>Scrum Master :</div>
                            <ul class="team-members">
                                <li>
                                    <a href="javascript:void(0);" data-bs-toggle="tooltip" title="{{project.scrum_master?.firstname}} {{project.scrum_master?.lastname}}"><img src="{{project.scrum_master?.profile_photo || image}}" alt="User Image"></a>
                                </li>
                            </ul>
                        </div>
                        <div class="project-members m-b-15">
                            <div>Team :</div>
                            <ul class="team-members" >
                                <li *ngFor="let team of project?.assigned_to.slice(0,3)">
                                    <a href="javascript:void(0);" data-bs-toggle="tooltip" Mattooltip="John Doe" title="John Doe"><img src="{{team?.profile_photo}}" alt="User Image"></a>
                                </li>
                                <li class="dropdown avatar-dropdown" >
                                    <a href="javascript:void(0);" class="all-users dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">+{{project.assigned_to.length -3}}</a>
                                    <div class="dropdown-menu dropdown-menu-right">
                                        <div class="avatar-group">
                                            <a class="avatar avatar-xs" *ngFor="let team of project?.assigned_to.slice(3)" href="javascript:void(0);">
                                                <img src="{{team.profile_photo}}" alt="User Image">
                                            </a>
                                        </div>
                                        <div class="avatar-pagination">
                                            <ul class="pagination">
                                                <li class="page-item">
                                                    <a class="page-link" href="javascript:void(0);" aria-label="Previous">
                                                        <span aria-hidden="true">«</span>
                                                        <span class="visually-hidden">Previous</span>
                                                    </a>
                                                </li>
                                                <li class="page-item"><a class="page-link" href="javascript:void(0);">1</a></li>
                                                <li class="page-item"><a class="page-link" href="javascript:void(0);">2</a></li>
                                                <li class="page-item">
                                                    <a class="page-link" href="javascript:void(0);" aria-label="Next">
                                                        <span aria-hidden="true">»</span>
                                                    <span class="visually-hidden">Next</span>
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </li> 
                            </ul>
                        </div><br>
                        <p class="m-b-10">Progress <span class="text-success float-end">{{project?.progress}}%</span></p>
                        <div class="progress progress-xs mb-0">
                            <div class="'progress-bar bg-success" [style]="'width:'+project.progress+'%'" role="progressbar" data-bs-toggle="tooltip"></div>
                        </div>
                    </div>
                </div>
            </div>
            
        </div>
    </div>
    <!-- /Page Content -->
    
    <!-- Create Project Modal -->
    <app-project-modal [projectData]="selectedProject" (formSubmitted)="handleFormSubmission()"></app-project-modal>
    <!-- /Create Project Modal -->